
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Collection | Symfony2日本語ドキュメント</title>
    <link rel="stylesheet" href="../../static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../static/configurationblock.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../static/jquery.js"></script>
    <script type="text/javascript" src="../../static/underscore.js"></script>
    <script type="text/javascript" src="../../static/doctools.js"></script>
      <script type="text/javascript" src="../../static/js/jquery.corner.js"></script>
      <script type="text/javascript" src="../../static/configurationblock.js"></script>
      <script type="text/javascript">
      $(function(){
          $('.section h1').corner();
          $('.highlight-python pre').corner();
          $('.highlight-yml pre').corner();
          $('.highlight').corner();
      });
      </script>
    <link rel="top" title="Symfony2Doc 1.0.0 documentation" href="../../index.html" />
    <link rel="up" title="バリデータリファレンス" href="../constraints.html" />
    <link rel="next" title="Count" href="Count.html" />
    <link rel="prev" title="Choice" href="Choice.html" /> 
  </head>
  <body>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/ja_JP/all.js#xfbml=1&appId=47270766548";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<div id="all">
  <div id="content">
    <div id="content_wrapper">
      <div id="top_menu">
        <div id="top_menu_wrapper">
        </div>
      </div>
      <div id="header_top">
        <h1 id="logo_top"><a href="http://docs.symfony.gr.jp/">Symfonyユーザー会ドキュメントポータル</a></h1>
        <div id="header_top_left"></div>
      </div>
      <!-- end #header -->
      <div id="navbar">
        <ul>
          <li><a href="../../index.html">トップ（索引）</a></li>
          <li><a href="../../quick_tour/index.html">クイックツアー</a></li>
          <li><a href="../../book/index.html">ガイドブック</a></li>
          <li><a href="../../cookbook/index.html">クックブック</a></li>
          <li><a href="../../components/index.html">コンポーネント</a></li>
          <li><a href="../index.html">リファレンス</a></li>
          <li><a href="../../contributing/index.html">貢献</a></li>
        </ul>
      </div>
      <!-- end #navbar -->
      <div id="main">  
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3>このページのコンテンツ</h3>
  <ul>
<li><a class="reference internal" href="#">Collection</a><ul>
<li><a class="reference internal" href="#id1">基本的な使い方</a><ul>
<li><a class="reference internal" href="#id2">フィールドの存在と欠落</a></li>
<li><a class="reference internal" href="#id3">フィールドにおける必須および任意の制約</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id4">オプション</a><ul>
<li><a class="reference internal" href="#fields">fields</a></li>
<li><a class="reference internal" href="#allowextrafields">allowExtraFields</a></li>
<li><a class="reference internal" href="#extrafieldsmessage">extraFieldsMessage</a></li>
<li><a class="reference internal" href="#allowmissingfields">allowMissingFields</a></li>
<li><a class="reference internal" href="#missingfieldsmessage">missingFieldsMessage</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>前のドキュメント</h4>
  <p class="topless"><a href="Choice.html"
                        title="previous chapter">Choice</a></p>
  <h4>次のドキュメント</h4>
  <p class="topless"><a href="Count.html"
                        title="next chapter">Count</a></p>
  <h3>ソース</h3>
  <ul class="this-page-menu">
    <li><a href="../../sources/reference/constraints/Collection.txt"
           rel="nofollow">ページのソースを表示</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>クイック検索</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
          <br />
          <br />
          <div id="other">
            <h3>クイックリンク</h3>
            <ul>
              <li><a href="../../book/installation.html">インストール方法</a></li>
              <li><a href="../forms/types.html">FormTypeリファレンス</a></li>
              <li><a href="../constraints.html">バリデータリファレンス</a></li>
              <li><a href="http://twig.sensiolabs.org/documentation">Twigリファレンス</a></li>
              <li><a href="http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/annotations-reference.html">Doctrine ORMアノテーションリファレンス</a></li>
            </ul>

<br />
            <h3>コメントリスト</h3>

<script type="text/javascript" src="http://symfony-japan.disqus.com/combination_widget.js?num_items=10&hide_mods=0&color=grey&default_tab=recent&excerpt_length=200"></script><a href="http://disqus.com/">Powered by Disqus</a>


            <br />
            <p>ご質問や翻訳不備等お気軽にコメントください。</p>

            <br />
          </div>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="collection">
<h1>Collection<a class="headerlink" href="#collection" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>対象バージョン：2.3</li>
<li>翻訳更新日：2013/6/7</li>
</ul>
</div>
<p>この制約は、検証対象のデータがコレクション、つまり配列であるか、<tt class="docutils literal"><span class="pre">Traversable</span></tt> や <tt class="docutils literal"><span class="pre">ArrayAccess</span></tt> を実装したオブジェクトである場合に使います。コレクション中のキーごとに異なる制約を適用できます。たとえば、<tt class="docutils literal"><span class="pre">email</span></tt> キーの要素には <tt class="docutils literal"><span class="pre">Email</span></tt> 制約を適用し、<tt class="docutils literal"><span class="pre">inventory</span></tt> キーの要素には <tt class="docutils literal"><span class="pre">Range</span></tt> 制約を適用する、といったことが可能です。</p>
<p>また、コレクション中の任意のキーに対して存在することを確認したり、予期しないキーが存在しないことを確認したりできます。</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="82%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>適用先</td>
<td><em class="xref std std-ref">プロパティまたはメソッド</em></td>
</tr>
<tr class="row-even"><td>オプション</td>
<td><ul class="first last simple">
<li><a class="reference internal" href="#fields">fields</a></li>
<li><a class="reference internal" href="#allowextrafields">allowExtraFields</a></li>
<li><a class="reference internal" href="#extrafieldsmessage">extraFieldsMessage</a></li>
<li><a class="reference internal" href="#allowmissingfields">allowMissingFields</a></li>
<li><a class="reference internal" href="#missingfieldsmessage">missingFieldsMessage</a></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>クラス</td>
<td><tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\Validator\Constraints\Collection</span></tt></td>
</tr>
<tr class="row-even"><td>バリデーター</td>
<td><tt class="xref php php-class docutils literal"><span class="pre">Symfony\Component\Validator\Constraints\CollectionValidator</span></tt></td>
</tr>
</tbody>
</table>
<div class="section" id="id1">
<h2>基本的な使い方<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">Collection</span></tt> 制約を使うと、コレクション中のキーごとに別々の検証を行えます。次のように <tt class="docutils literal"><span class="pre">Author</span></tt> クラスに <tt class="docutils literal"><span class="pre">$profileData</span></tt> があるとします。</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// src/Acme/BlogBundle/Entity/Author.php</span>
<span class="k">namespace</span> <span class="nx">Acme\BlogBundle\Entity</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Author</span>
<span class="p">{</span>
    <span class="k">protected</span> <span class="nv">$profileData</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;personal_email&#39;</span><span class="p">,</span>
        <span class="s1">&#39;short_bio&#39;</span><span class="p">,</span>
    <span class="p">);</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">setProfileData</span><span class="p">(</span><span class="nv">$key</span><span class="p">,</span> <span class="nv">$value</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">profileData</span><span class="p">[</span><span class="nv">$key</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$value</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><tt class="docutils literal"><span class="pre">profileData</span></tt> 配列プロパティの <tt class="docutils literal"><span class="pre">personal_email</span></tt> 要素は有効なメールアドレス、<tt class="docutils literal"><span class="pre">short_bio</span></tt> 要素は空ではなく 100 文字以内であることを検証したい場合、次のようにします。</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># src/Acme/BlogBundle/Resources/config/validation.yml</span>
<span class="l-Scalar-Plain">Acme\BlogBundle\Entity\Author</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">properties</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">profileData</span><span class="p-Indicator">:</span>
            <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">Collection</span><span class="p-Indicator">:</span>
                <span class="l-Scalar-Plain">fields</span><span class="p-Indicator">:</span>
                    <span class="l-Scalar-Plain">personal_email</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Email</span>
                    <span class="l-Scalar-Plain">short_bio</span><span class="p-Indicator">:</span>
                        <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">NotBlank</span>
                        <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">Length</span><span class="p-Indicator">:</span>
                            <span class="l-Scalar-Plain">max</span><span class="p-Indicator">:</span>   <span class="l-Scalar-Plain">100</span>
                            <span class="l-Scalar-Plain">maxMessage</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Your short bio is too long!</span>
                <span class="l-Scalar-Plain">allowMissingFields</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
</pre></div>
</div>
</li>
<li><em>Annotations</em><div class="highlight-php-annotations"><div class="highlight"><pre><span class="c1">// src/Acme/BlogBundle/Entity/Author.php</span>
<span class="k">namespace</span> <span class="nx">Acme\BlogBundle\Entity</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Constraints</span> <span class="k">as</span> <span class="nx">Assert</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Author</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Assert\Collection(</span>
<span class="sd">     *     fields = {</span>
<span class="sd">     *         &quot;personal_email&quot; = @Assert\Email,</span>
<span class="sd">     *         &quot;short_bio&quot; = {</span>
<span class="sd">     *             @Assert\NotBlank(),</span>
<span class="sd">     *             @Assert\Length(</span>
<span class="sd">     *                 max = 100,</span>
<span class="sd">     *                 maxMessage = &quot;Your bio is too long!&quot;</span>
<span class="sd">     *             )</span>
<span class="sd">     *         }</span>
<span class="sd">     *     },</span>
<span class="sd">     *     allowMissingFields = true</span>
<span class="sd">     * )</span>
<span class="sd">     */</span>
     <span class="k">protected</span> <span class="nv">$profileData</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
         <span class="s1">&#39;personal_email&#39;</span><span class="p">,</span>
         <span class="s1">&#39;short_bio&#39;</span><span class="p">,</span>
     <span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- src/Acme/BlogBundle/Resources/config/validation.xml --&gt;</span>
<span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">&quot;Acme\BlogBundle\Entity\Author&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;profileData&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;constraint</span> <span class="na">name=</span><span class="s">&quot;Collection&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;option</span> <span class="na">name=</span><span class="s">&quot;fields&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;value</span> <span class="na">key=</span><span class="s">&quot;personal_email&quot;</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;constraint</span> <span class="na">name=</span><span class="s">&quot;Email&quot;</span> <span class="nt">/&gt;</span>
                <span class="nt">&lt;/value&gt;</span>
                <span class="nt">&lt;value</span> <span class="na">key=</span><span class="s">&quot;short_bio&quot;</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;constraint</span> <span class="na">name=</span><span class="s">&quot;NotBlank&quot;</span> <span class="nt">/&gt;</span>
                    <span class="nt">&lt;constraint</span> <span class="na">name=</span><span class="s">&quot;Length&quot;</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;option</span> <span class="na">name=</span><span class="s">&quot;max&quot;</span><span class="nt">&gt;</span>100<span class="nt">&lt;/option&gt;</span>
                        <span class="nt">&lt;option</span> <span class="na">name=</span><span class="s">&quot;maxMessage&quot;</span><span class="nt">&gt;</span>Your bio is too long!<span class="nt">&lt;/option&gt;</span>
                    <span class="nt">&lt;/constraint&gt;</span>
                <span class="nt">&lt;/value&gt;</span>
            <span class="nt">&lt;/option&gt;</span>
            <span class="nt">&lt;option</span> <span class="na">name=</span><span class="s">&quot;allowMissingFields&quot;</span><span class="nt">&gt;</span>true<span class="nt">&lt;/option&gt;</span>
        <span class="nt">&lt;/constraint&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/class&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="c1">// src/Acme/BlogBundle/Entity/Author.php</span>
<span class="k">namespace</span> <span class="nx">Acme\BlogBundle\Entity</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Mapping\ClassMetadata</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Constraints</span> <span class="k">as</span> <span class="nx">Assert</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Author</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="nv">$options</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>

    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">loadValidatorMetadata</span><span class="p">(</span><span class="nx">ClassMetadata</span> <span class="nv">$metadata</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$metadata</span><span class="o">-&gt;</span><span class="na">addPropertyConstraint</span><span class="p">(</span><span class="s1">&#39;profileData&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Assert\Collection</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;fields&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;personal_email&#39;</span> <span class="o">=&gt;</span> <span class="k">new</span> <span class="nx">Assert\Email</span><span class="p">(),</span>
                <span class="s1">&#39;lastName&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                    <span class="k">new</span> <span class="nx">Assert\NotBlank</span><span class="p">(),</span>
                    <span class="k">new</span> <span class="nx">Assert\Length</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s2">&quot;max&quot;</span> <span class="o">=&gt;</span> <span class="mi">100</span><span class="p">)),</span>
                <span class="p">),</span>
            <span class="p">),</span>
            <span class="s1">&#39;allowMissingFields&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
        <span class="p">)));</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id2">
<h3>フィールドの存在と欠落<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>Collection 制約によりコレクション中の個々の要素に割り当てられた制約が単純に検証されるだけではありません。デフォルトでは、制約で指定したキーがコレクションに存在しなかったり、想定していないキーが存在した場合、バリデーションエラーがスローされます。</p>
<p>コレクションからのキーの欠落や、想定しないキーの存在を許可したい場合は、<a class="reference internal" href="#allowmissingfields">allowMissingFields</a> オプションや <a class="reference internal" href="#allowextrafields">allowExtraFields</a> オプションを指定します。上の例では <tt class="docutils literal"><span class="pre">allowMissingFields</span></tt> オプションが <tt class="docutils literal"><span class="pre">true</span></tt> に設定されているので、<tt class="docutils literal"><span class="pre">$personalData</span></tt> プロパティに <tt class="docutils literal"><span class="pre">personal_email</span></tt> 要素または <tt class="docutils literal"><span class="pre">short_bio</span></tt> 要素が存在しなくてもバリデーションエラーは発生しません。</p>
<div class="versionadded">
<p><span>New in version 2.3: </span>Symfony 2.3 以降では、<tt class="docutils literal"><span class="pre">Required</span></tt> 制約および <tt class="docutils literal"><span class="pre">Optional</span></tt> 制約が
<tt class="docutils literal"><span class="pre">Symfony\Component\Validator\Constraints\</span></tt> 名前空間に移動されました。</p>
</div>
</div>
<div class="section" id="id3">
<h3>フィールドにおける必須および任意の制約<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>コレクション中のフィールドに対する制約を、<tt class="docutils literal"><span class="pre">Required</span></tt> 制約または <tt class="docutils literal"><span class="pre">Optional</span></tt> 制約でラップすることができます。<tt class="docutils literal"><span class="pre">Required</span></tt> でラップするとフィールドの有無に関わらず制約が適用されます。<tt class="docutils literal"><span class="pre">Optional</span></tt> でラップすると、フィールドが存在する場合にのみ制約が適用されます。</p>
<p>たとえば、<tt class="docutils literal"><span class="pre">ProfileData</span></tt> 配列中の <tt class="docutils literal"><span class="pre">personal_email</span></tt> フィールドは空ではなく有効なメールアドレスであることを検証する一方、<tt class="docutils literal"><span class="pre">alternate_email</span></tt> フィールドの入力は任意で、値がある場合は有効なメールアドレスであることを検証したい場合、次のようにします。</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Annotations</em><div class="highlight-php-annotations"><div class="highlight"><pre><span class="c1">// src/Acme/BlogBundle/Entity/Author.php</span>
<span class="k">namespace</span> <span class="nx">Acme\BlogBundle\Entity</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Constraints</span> <span class="k">as</span> <span class="nx">Assert</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Author</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * @Assert\Collection(</span>
<span class="sd">     *     fields={</span>
<span class="sd">     *         &quot;personal_email&quot;  = @Assert\Required({@Assert\NotBlank, @Assert\Email}),</span>
<span class="sd">     *         &quot;alternate_email&quot; = @Assert\Optional(@Assert\Email),</span>
<span class="sd">     *     }</span>
<span class="sd">     * )</span>
<span class="sd">     */</span>
     <span class="k">protected</span> <span class="nv">$profileData</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
         <span class="s1">&#39;personal_email&#39;</span><span class="p">,</span>
     <span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="c1">// src/Acme/BlogBundle/Entity/Author.php</span>
<span class="k">namespace</span> <span class="nx">Acme\BlogBundle\Entity</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Mapping\ClassMetadata</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Symfony\Component\Validator\Constraints</span> <span class="k">as</span> <span class="nx">Assert</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">Author</span>
<span class="p">{</span>
    <span class="k">protected</span> <span class="nv">$profileData</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;personal_email&#39;</span><span class="p">);</span>

    <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="nf">loadValidatorMetadata</span><span class="p">(</span><span class="nx">ClassMetadata</span> <span class="nv">$metadata</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$metadata</span><span class="o">-&gt;</span><span class="na">addPropertyConstraint</span><span class="p">(</span><span class="s1">&#39;profileData&#39;</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Assert\Collection</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;fields&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;personal_email&#39;</span>  <span class="o">=&gt;</span> <span class="k">new</span> <span class="nx">Assert\Required</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="k">new</span> <span class="nx">Assert\NotBlank</span><span class="p">(),</span> <span class="k">new</span> <span class="nx">Assert\Email</span><span class="p">())),</span>
                <span class="s1">&#39;alternate_email&#39;</span> <span class="o">=&gt;</span> <span class="k">new</span> <span class="nx">Assert\Optional</span><span class="p">(</span><span class="k">new</span> <span class="nx">Assert\Email</span><span class="p">()),</span>
            <span class="p">),</span>
        <span class="p">)));</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p><tt class="docutils literal"><span class="pre">alternate_email</span></tt> に <tt class="docutils literal"><span class="pre">Optional</span></tt> を指定しているので、<tt class="docutils literal"><span class="pre">allowMissingFields</span></tt> オプションを <tt class="docutils literal"><span class="pre">true</span></tt> に設定しなくても、<tt class="docutils literal"><span class="pre">profileData</span></tt> 配列から <tt class="docutils literal"><span class="pre">alternate_email</span></tt>
プロパティは省略することができます。
<tt class="docutils literal"><span class="pre">personal_email</span></tt> フィールドには <tt class="docutils literal"><span class="pre">Required</span></tt> を指定しているので、配列に <tt class="docutils literal"><span class="pre">personal_email</span></tt> フィールドが存在しなくても <tt class="docutils literal"><span class="pre">NotBlank</span></tt> 制約が適用され、検証は失敗します。</p>
</div>
</div>
<div class="section" id="id4">
<h2>オプション<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<div class="section" id="fields">
<h3>fields<a class="headerlink" href="#fields" title="Permalink to this headline">¶</a></h3>
<p><strong>型</strong>: <tt class="docutils literal"><span class="pre">array</span></tt> [<em class="xref std std-ref">default option</em>]</p>
<p>This option is required, and is an associative array defining all of the
keys in the collection and, for each key, exactly which validator(s) should
be executed against that element of the collection.</p>
</div>
<div class="section" id="allowextrafields">
<h3>allowExtraFields<a class="headerlink" href="#allowextrafields" title="Permalink to this headline">¶</a></h3>
<p><strong>型</strong>: <tt class="docutils literal"><span class="pre">Boolean</span></tt> <strong>デフォルト</strong>: false</p>
<p><a class="reference internal" href="#fields">fields</a> オプションにない要素が検証対象のコレクションに存在した場合、このオプションが <tt class="docutils literal"><span class="pre">false</span></tt> に設定されていると、バリデーションエラーが返されます。<tt class="docutils literal"><span class="pre">true</span></tt> に設定すると、エラーになりません。</p>
</div>
<div class="section" id="extrafieldsmessage">
<h3>extraFieldsMessage<a class="headerlink" href="#extrafieldsmessage" title="Permalink to this headline">¶</a></h3>
<p><strong>型</strong>: <tt class="docutils literal"><span class="pre">Boolean</span></tt> <strong>デフォルト</strong>: <tt class="docutils literal"><span class="pre">The</span> <span class="pre">fields</span> <span class="pre">{{</span> <span class="pre">fields</span> <span class="pre">}}</span> <span class="pre">were</span> <span class="pre">not</span> <span class="pre">expected</span></tt></p>
<p>検証対象のコレクションに予期しないフィールドが見つかり、<a class="reference internal" href="#allowextrafields">allowExtraFields</a> が <tt class="docutils literal"><span class="pre">false</span></tt> に設定されている場合に、このメッセージが表示されます。allowMissingFields</p>
</div>
<div class="section" id="allowmissingfields">
<h3>allowMissingFields<a class="headerlink" href="#allowmissingfields" title="Permalink to this headline">¶</a></h3>
<p><strong>型</strong>: <tt class="docutils literal"><span class="pre">Boolean</span></tt> <strong>デフォルト</strong>: false</p>
<p><a class="reference internal" href="#fields">fields</a> オプションに指定された要素が検証対象のコレクションに存在しない場合、このオプションが <tt class="docutils literal"><span class="pre">false</span></tt>  に設定されていると、バリデーションエラーが返されます。<tt class="docutils literal"><span class="pre">true</span></tt> に設定すると、<a class="reference internal" href="#fields">fields</a> オプションにしていしたフィールドが検証対象のコレクションに存在しなくてもエラーになりません。</p>
</div>
<div class="section" id="missingfieldsmessage">
<h3>missingFieldsMessage<a class="headerlink" href="#missingfieldsmessage" title="Permalink to this headline">¶</a></h3>
<p><strong>型</strong>: <tt class="docutils literal"><span class="pre">Boolean</span></tt> <strong>デフォルト</strong>: <tt class="docutils literal"><span class="pre">The</span> <span class="pre">fields</span> <span class="pre">{{</span> <span class="pre">fields</span> <span class="pre">}}</span> <span class="pre">are</span> <span class="pre">missing</span></tt></p>
<p>検証対象のコレクションに期待するフィールドが存在せず、<a class="reference internal" href="#allowmissingfields">allowMissingFields</a> が <tt class="docutils literal"><span class="pre">false</span></tt> に設定されている場合に、このメッセージが表示されます。</p>
</div>
</div>
</div>


<div id="page_prev_next">
<a class="prev" href="Choice.html">< Choice</a>
<a class="next" href="Count.html">Count ></a>
</div>

<div class="common_content_footer">
<ul>
  <li> → <a href="http://symfony.com/doc/master/reference/constraints/Collection.html">公式英語ドキュメント</a></li>
  <li> → <a href="https://github.com/symfony/symfony-docs/commits/master/reference/constraints/Collection.rst">原文コミット履歴</a>
  <li> → <a href="https://github.com/symfony-japan/symfony-docs-ja/commits/master/reference/constraints/Collection.rst">翻訳コミット履歴</a>
</ul>
<br />
翻訳の不備などは、お気軽にコメント欄にてご指摘ください。
</div>

<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'symfony-japan'; // required: replace example with your forum shortname

    // The following are highly recommended additional parameters. Remove the slashes in front to use.
    // var disqus_identifier = 'unique_dynamic_id_1234';
    // var disqus_url = 'http://example.com/permalink-to-page.html';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

<div class="fb-like-box" data-href="http://www.facebook.com/symfonyjapan" data-width="203" data-show-faces="true" data-stream="true" data-border-color="#FFF" data-header="true"></div>

          </div>
        </div>
      </div>

      <div class="clearer"></div>
    </div>

      </div>
      <!-- end #main -->
    </div>
    <!-- end #content_wrapper -->
  </div>
  <!-- end #content -->


  <div id="footer">
    <div id="footer_wrapper">
      <div id="footer_content">
        <div style=" position: relative;">
          <div id="footer_left"></div>
          <div id="footer_right"></div>
        </div>
        <div id="f_navbar">
        <ul>
          <li><a href="../../index.html">トップ（索引）</a></li>
          <li><a href="../../quick_tour/index.html">クイックツアー</a></li>
          <li><a href="../../book/index.html">ガイドブック</a></li>
          <li><a href="../../cookbook/index.html">クックブック</a></li>
          <li><a href="../../components/index.html">コンポーネント</a></li>
          <li><a href="../index.html">リファレンス</a></li>
          <li><a href="../../contributing/index.html">貢献</a></li>
        </ul>
      </div>
      <!-- end #navbar -->
        <div>
          <p id="copyright">
            <a href="../../contributing/documentation/license.html">ドキュメントの著作権</a>は Symfony 公式に準じます(Creative Commons Attribution-Share Alike 3.0 Unported ライセンス)。<br />
            Copyright &copy; 2014 Symfony Japan. All rights reserved.<br />
            &nbsp;&nbsp;&nbsp;Bandwidth and hardware provided by <a href="http://www.asial.co.jp/">アシアル株式会社</a>
            &nbsp;&nbsp;Powered by <a href="http://sphinx.pocoo.org/">Sphinx</a>
          </p>
        </div>
      </div>
      <!-- end #footer_content -->
        </div>
        <!-- end #footer_wrapper -->
      </div>
      <!-- end #footer -->
    </div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-16659283-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
  </body>
</html>
