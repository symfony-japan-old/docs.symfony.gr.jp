
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Sending Messages | Symfony2日本語ドキュメント</title>
    <link rel="stylesheet" href="../../../../../static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../../../../static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../../../static/configurationblock.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../../',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../../../static/jquery.js"></script>
    <script type="text/javascript" src="../../../../../static/underscore.js"></script>
    <script type="text/javascript" src="../../../../../static/doctools.js"></script>
      <script type="text/javascript" src="../../../../../static/js/jquery.corner.js"></script>
      <script type="text/javascript" src="../../../../../static/configurationblock.js"></script>
      <script type="text/javascript">
      $(function(){
          $('.section h1').corner();
          $('.highlight-python pre').corner();
          $('.highlight-yml pre').corner();
          $('.highlight').corner();
      });
      </script>
    <link rel="top" title="Symfony2Doc 1.0.0 documentation" href="../../../../../index.html" /> 
  </head>
  <body>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/ja_JP/all.js#xfbml=1&appId=47270766548";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<div id="all">
  <div id="content">
    <div id="content_wrapper">
      <div id="top_menu">
        <div id="top_menu_wrapper">
        </div>
      </div>
      <div id="header_top">
        <h1 id="logo_top"><a href="http://docs.symfony.gr.jp/">Symfonyユーザー会ドキュメントポータル</a></h1>
        <div id="header_top_left"></div>
      </div>
      <!-- end #header -->
      <div id="navbar">
        <ul>
          <li><a href="../../../../../index.html">トップ（索引）</a></li>
          <li><a href="../../../../../quick_tour/index.html">クイックツアー</a></li>
          <li><a href="../../../../../book/index.html">ガイドブック</a></li>
          <li><a href="../../../../../cookbook/index.html">クックブック</a></li>
          <li><a href="../../../../../components/index.html">コンポーネント</a></li>
          <li><a href="../../../../../reference/index.html">リファレンス</a></li>
          <li><a href="../../../../../contributing/index.html">貢献</a></li>
        </ul>
      </div>
      <!-- end #navbar -->
      <div id="main">  
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3>このページのコンテンツ</h3>
  <ul>
<li><a class="reference internal" href="#">Sending Messages</a><ul>
<li><a class="reference internal" href="#quick-reference-for-sending-a-message">Quick Reference for Sending a Message</a><ul>
<li><a class="reference internal" href="#transport-types">Transport Types</a><ul>
<li><a class="reference internal" href="#the-smtp-transport">The SMTP Transport</a><ul>
<li><a class="reference internal" href="#using-the-smtp-transport">Using the SMTP Transport</a></li>
<li><a class="reference internal" href="#encrypted-smtp">Encrypted SMTP</a></li>
<li><a class="reference internal" href="#smtp-with-a-username-and-password">SMTP with a Username and Password</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-sendmail-transport">The Sendmail Transport</a><ul>
<li><a class="reference internal" href="#using-the-sendmail-transport">Using the Sendmail Transport</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-mail-transport">The Mail Transport</a><ul>
<li><a class="reference internal" href="#using-the-mail-transport">Using the Mail Transport</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#available-methods-for-sending-messages">Available Methods for Sending Messages</a><ul>
<li><a class="reference internal" href="#using-the-send-method">Using the <tt class="docutils literal"><span class="pre">send()</span></tt> Method</a></li>
<li><a class="reference internal" href="#sending-emails-in-batch">Sending Emails in Batch</a></li>
</ul>
</li>
<li><a class="reference internal" href="#finding-out-rejected-addresses">Finding out Rejected Addresses</a><ul>
<li><a class="reference internal" href="#getting-failures-by-reference">Getting Failures By-reference</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  <h3>ソース</h3>
  <ul class="this-page-menu">
    <li><a href="../../../../../sources/osc2011-nagoya-symfony2-tutorial/Symfony/vendor/swiftmailer/doc/sending.txt"
           rel="nofollow">ページのソースを表示</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>クイック検索</h3>
    <form class="search" action="../../../../../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
          <br />
          <br />
          <div id="other">
            <h3>クイックリンク</h3>
            <ul>
              <li><a href="../../../../../book/installation.html">インストール方法</a></li>
              <li><a href="../../../../../reference/forms/types.html">FormTypeリファレンス</a></li>
              <li><a href="../../../../../reference/constraints.html">バリデータリファレンス</a></li>
              <li><a href="http://twig.sensiolabs.org/documentation">Twigリファレンス</a></li>
              <li><a href="http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/annotations-reference.html">Doctrine ORMアノテーションリファレンス</a></li>
            </ul>

<br />
            <h3>コメントリスト</h3>

<script type="text/javascript" src="http://symfony-japan.disqus.com/combination_widget.js?num_items=10&hide_mods=0&color=grey&default_tab=recent&excerpt_length=200"></script><a href="http://disqus.com/">Powered by Disqus</a>


            <br />
            <p>ご質問や翻訳不備等お気軽にコメントください。</p>

            <br />
          </div>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            

<p>コンテンツ上部に更新日の記載のないページは、翻訳の内容が2.0相当のものになっております。最新の内容は<a href="http://symfony.com/doc/current/osc2011-nagoya-symfony2-tutorial/Symfony/vendor/swiftmailer/doc/sending.html">原文のページ</a>をご確認ください。</p>

  <div class="section" id="sending-messages">
<h1>Sending Messages<a class="headerlink" href="#sending-messages" title="Permalink to this headline">¶</a></h1>
<div class="section" id="quick-reference-for-sending-a-message">
<h2>Quick Reference for Sending a Message<a class="headerlink" href="#quick-reference-for-sending-a-message" title="Permalink to this headline">¶</a></h2>
<p>Sending a message is very straightforward. You create a Transport, use it to
create the Mailer, then you use the Mailer to send the message.</p>
<p>To send a Message:</p>
<ul class="simple">
<li>Create a Transport from one of the provided Transports &#8211;
<tt class="docutils literal"><span class="pre">Swift_SmtpTransport</span></tt>, <tt class="docutils literal"><span class="pre">Swift_SendmailTransport</span></tt>,
<tt class="docutils literal"><span class="pre">Swift_MailTransport</span></tt> or one of the aggregate Transports.</li>
<li>Create an instance of the <tt class="docutils literal"><span class="pre">Swift_Mailer</span></tt> class, using the Transport as
it&#8217;s constructor parameter.</li>
<li>Create a Message.</li>
<li>Send the message via the <tt class="docutils literal"><span class="pre">send()</span></tt> method on the Mailer object.</li>
</ul>
<p>When using <tt class="docutils literal"><span class="pre">send()</span></tt> the message will be sent just like it would
be sent if you used your mail client. An integer is returned which includes
the number of successful recipients. If none of the recipients could be sent
to then zero will be returned, which equates to a boolean
<tt class="docutils literal"><span class="pre">false</span></tt>. If you set two <tt class="docutils literal"><span class="pre">To:</span></tt> recipients and
three <tt class="docutils literal"><span class="pre">Bcc:</span></tt> recipients in the message and all of the
recipients are delivered to successfully then the value 5 will be returned.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">require_once</span> <span class="s1">&#39;lib/swift_required.php&#39;</span><span class="p">;</span>

<span class="c1">//Create the Transport</span>
<span class="nv">$transport</span> <span class="o">=</span> <span class="nx">Swift_SmtpTransport</span><span class="o">::</span><span class="na">newInstance</span><span class="p">(</span><span class="s1">&#39;smtp.example.org&#39;</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsername</span><span class="p">(</span><span class="s1">&#39;your username&#39;</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setPassword</span><span class="p">(</span><span class="s1">&#39;your password&#39;</span><span class="p">)</span>
  <span class="p">;</span>

<span class="cm">/*</span>
<span class="cm">You could alternatively use a different transport such as Sendmail or Mail:</span>

<span class="cm">//Sendmail</span>
<span class="cm">$transport = Swift_SendmailTransport::newInstance(&#39;/usr/sbin/sendmail -bs&#39;);</span>

<span class="cm">//Mail</span>
<span class="cm">$transport = Swift_MailTransport::newInstance();</span>
<span class="cm">*/</span>

<span class="c1">//Create the Mailer using your created Transport</span>
<span class="nv">$mailer</span> <span class="o">=</span> <span class="nx">Swift_Mailer</span><span class="o">::</span><span class="na">newInstance</span><span class="p">(</span><span class="nv">$transport</span><span class="p">);</span>

<span class="c1">//Create a message</span>
<span class="nv">$message</span> <span class="o">=</span> <span class="nx">Swift_Message</span><span class="o">::</span><span class="na">newInstance</span><span class="p">(</span><span class="s1">&#39;Wonderful Subject&#39;</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setFrom</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;john@doe.com&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;John Doe&#39;</span><span class="p">))</span>
  <span class="o">-&gt;</span><span class="na">setTo</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;receiver@domain.org&#39;</span><span class="p">,</span> <span class="s1">&#39;other@domain.org&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;A name&#39;</span><span class="p">))</span>
  <span class="o">-&gt;</span><span class="na">setBody</span><span class="p">(</span><span class="s1">&#39;Here is the message itself&#39;</span><span class="p">)</span>
  <span class="p">;</span>

<span class="c1">//Send the message</span>
<span class="nv">$result</span> <span class="o">=</span> <span class="nv">$mailer</span><span class="o">-&gt;</span><span class="na">send</span><span class="p">(</span><span class="nv">$message</span><span class="p">);</span>
</pre></div>
</div>
<div class="section" id="transport-types">
<h3>Transport Types<a class="headerlink" href="#transport-types" title="Permalink to this headline">¶</a></h3>
<p>A Transport is the component which actually does the sending. You need to
provide a Transport object to the Mailer class and there are several possible
options.</p>
<p>Typically you will not need to know how a Transport works under-the-surface,
you will only need to know how to create an instance of one, and which one to
use for your environment.</p>
<div class="section" id="the-smtp-transport">
<h4>The SMTP Transport<a class="headerlink" href="#the-smtp-transport" title="Permalink to this headline">¶</a></h4>
<p>The SMTP Transport sends messages over the (standardized) Simple Message Transfer
Protocol.  It can deal with encryption and authentication.</p>
<p>The SMTP Transport, <tt class="docutils literal"><span class="pre">Swift_SmtpTransport</span></tt> is without doubt the most commonly
used Transport because it will work on 99% of web servers (I just made that
number up, but you get the idea). All the server needs is the ability to
connect to a remote (or even local) SMTP server on the correct port number
(usually 25).</p>
<p>SMTP servers often require users to authenticate with a username and password
before any mail can be sent to other domains. This is easily achieved using
Swift Mailer with the SMTP Transport.</p>
<p>SMTP is a protocol &#8211; in other words it&#8217;s a &#8220;way&#8221; of communicating a job
to be done (i.e. sending a message). The SMTP protocol is the fundamental
basis on which messages are delivered all over the internet 7 days a week, 365
days a year. For this reason it&#8217;s the most &#8220;direct&#8221; method of sending messages
you can use and it&#8217;s the one that will give you the most power and feedback
(such as delivery failures) when using Swift Mailer.</p>
<p>Because SMTP is generally run as a remote service (i.e. you connect to it over
the network/internet) it&#8217;s extremely portable from server-to-server. You can
easily store the SMTP server address and port number in a configuration file
within your application and adjust the settings accordingly if the code is
moved or if the SMTP server is changed.</p>
<p>Some SMTP servers &#8211; Google for example &#8211; use encryption for
security reasons. Swift Mailer supports using both SSL and TLS encryption
settings.</p>
<div class="section" id="using-the-smtp-transport">
<h5>Using the SMTP Transport<a class="headerlink" href="#using-the-smtp-transport" title="Permalink to this headline">¶</a></h5>
<p>The SMTP Transport is easy to use. Most configuration options can be set with
the constructor.</p>
<p>To use the SMTP Transport you need to know which SMTP server your code needs
to connect to. Ask your web host if you&#8217;re not sure. Lots of people ask me who
to connect to &#8211; I really can&#8217;t answer that since it&#8217;s a setting that&#8217;s
extremely specific to your hosting environment.</p>
<p>To use the SMTP Transport:</p>
<ul class="simple">
<li>Call <tt class="docutils literal"><span class="pre">Swift_SmtpTransport::newInstance()</span></tt> with the SMTP server name and
optionally with a port number (defaults to 25).</li>
<li>Use the returned object to create the Mailer.</li>
</ul>
<p>A connection to the SMTP server will be established upon the first call to
<tt class="docutils literal"><span class="pre">send()</span></tt>.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">require_once</span> <span class="s1">&#39;lib/swift_required.php&#39;</span><span class="p">;</span>

<span class="c1">//Create the Transport</span>
<span class="nv">$transport</span> <span class="o">=</span> <span class="nx">Swift_SmtpTransport</span><span class="o">::</span><span class="na">newInstance</span><span class="p">(</span><span class="s1">&#39;smtp.example.org&#39;</span><span class="p">,</span> <span class="mi">25</span><span class="p">);</span>

<span class="c1">//Create the Mailer using your created Transport</span>
<span class="nv">$mailer</span> <span class="o">=</span> <span class="nx">Swift_Mailer</span><span class="o">::</span><span class="na">newInstance</span><span class="p">(</span><span class="nv">$transport</span><span class="p">);</span>

<span class="cm">/*</span>
<span class="cm">It&#39;s also possible to use multiple method calls</span>

<span class="cm">$transport = Swift_SmtpTransport::newInstance()</span>
<span class="cm">  -&gt;setHost(&#39;smtp.example.org&#39;)</span>
<span class="cm">  -&gt;setPort(25)</span>
<span class="cm">  ;</span>
<span class="cm">*/</span>
</pre></div>
</div>
</div>
<div class="section" id="encrypted-smtp">
<h5>Encrypted SMTP<a class="headerlink" href="#encrypted-smtp" title="Permalink to this headline">¶</a></h5>
<p>You can use SSL or TLS encryption with the SMTP Transport by specifying it as
a parameter or with a method call.</p>
<p>To use encryption with the SMTP Transport:</p>
<ul class="simple">
<li>Pass the encryption setting as a third parameter to
<tt class="docutils literal"><span class="pre">Swift_SmtpTransport::newInstance()</span></tt>; or</li>
<li>Call the <tt class="docutils literal"><span class="pre">setEncryption()</span></tt> method on the Transport.</li>
</ul>
<p>A connection to the SMTP server will be established upon the first call to
<tt class="docutils literal"><span class="pre">send()</span></tt>. The connection will be initiated with the correct encryption
settings.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>For SSL or TLS encryption to work your PHP installation must have
appropriate OpenSSL transports wrappers. You can check if &#8220;tls&#8221; and/or
&#8220;ssl&#8221; are present in your PHP installation by using the PHP function
<tt class="docutils literal"><span class="pre">stream_get_transports()</span></tt></p>
<div class="last highlight-php"><div class="highlight"><pre><span class="k">require_once</span> <span class="s1">&#39;lib/swift_required.php&#39;</span><span class="p">;</span>

<span class="c1">//Create the Transport</span>
<span class="nv">$transport</span> <span class="o">=</span> <span class="nx">Swift_SmtpTransport</span><span class="o">::</span><span class="na">newInstance</span><span class="p">(</span><span class="s1">&#39;smtp.example.org&#39;</span><span class="p">,</span> <span class="mi">587</span><span class="p">,</span> <span class="s1">&#39;ssl&#39;</span><span class="p">);</span>

<span class="c1">//Create the Mailer using your created Transport</span>
<span class="nv">$mailer</span> <span class="o">=</span> <span class="nx">Swift_Mailer</span><span class="o">::</span><span class="na">newInstance</span><span class="p">(</span><span class="nv">$transport</span><span class="p">);</span>

<span class="cm">/*</span>
<span class="cm">It&#39;s also possible to use multiple method calls</span>

<span class="cm">$transport = Swift_SmtpTransport::newInstance()</span>
<span class="cm">  -&gt;setHost(&#39;smtp.example.org&#39;)</span>
<span class="cm">  -&gt;setPort(587)</span>
<span class="cm">  -&gt;setEncryption(&#39;ssl&#39;)</span>
<span class="cm">  ;</span>
<span class="cm">*/</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="smtp-with-a-username-and-password">
<h5>SMTP with a Username and Password<a class="headerlink" href="#smtp-with-a-username-and-password" title="Permalink to this headline">¶</a></h5>
<p>Some servers require authentication. You can provide a username and password
with <tt class="docutils literal"><span class="pre">setUsername()</span></tt> and <tt class="docutils literal"><span class="pre">setPassword()</span></tt>.</p>
<p>To use a username and password with the SMTP Transport:</p>
<ul class="simple">
<li>Create the Transport with <tt class="docutils literal"><span class="pre">Swift_SmtpTransport::newInstance()</span></tt>.</li>
<li>Call the <tt class="docutils literal"><span class="pre">setUsername()</span></tt> and <tt class="docutils literal"><span class="pre">setPassword()</span></tt> methods on the Transport.</li>
</ul>
<p>Your username and password will be used to authenticate upon first connect
when <tt class="docutils literal"><span class="pre">send()</span></tt> are first used on the Mailer.</p>
<p>If authentication fails, an Exception of type
<tt class="docutils literal"><span class="pre">Swift_Transport_TransportException</span></tt> will be thrown.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If you need to know early whether or not authentication has failed and an
Exception is going to be thrown, call the <tt class="docutils literal"><span class="pre">start()</span></tt> method on the
created Transport.</p>
<div class="last highlight-php"><div class="highlight"><pre><span class="k">require_once</span> <span class="s1">&#39;lib/swift_required.php&#39;</span><span class="p">;</span>

<span class="c1">//Create the Transport the call setUsername() and setPassword()</span>
<span class="nv">$transport</span> <span class="o">=</span> <span class="nx">Swift_SmtpTransport</span><span class="o">::</span><span class="na">newInstance</span><span class="p">(</span><span class="s1">&#39;smtp.example.org&#39;</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setUsername</span><span class="p">(</span><span class="s1">&#39;username&#39;</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setPassword</span><span class="p">(</span><span class="s1">&#39;password&#39;</span><span class="p">)</span>
  <span class="p">;</span>

<span class="c1">//Create the Mailer using your created Transport</span>
<span class="nv">$mailer</span> <span class="o">=</span> <span class="nx">Swift_Mailer</span><span class="o">::</span><span class="na">newInstance</span><span class="p">(</span><span class="nv">$transport</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="the-sendmail-transport">
<h4>The Sendmail Transport<a class="headerlink" href="#the-sendmail-transport" title="Permalink to this headline">¶</a></h4>
<p>The Sendmail Transport sends messages by communicating with a locally
installed MTA &#8211; such as <tt class="docutils literal"><span class="pre">sendmail</span></tt>.</p>
<p>The Sendmail Transport, <tt class="docutils literal"><span class="pre">Swift_SendmailTransport</span></tt> does not
directly connect to any remote services. It is designed for Linux servers that
have <tt class="docutils literal"><span class="pre">sendmail</span></tt> installed. The Transport starts a local
<tt class="docutils literal"><span class="pre">sendmail</span></tt> process and sends messages to it. Usually the
<tt class="docutils literal"><span class="pre">sendmail</span></tt> process will respond quickly as it spools your
messages to disk before sending them.</p>
<p>The Transport is named the Sendmail Transport for historical reasons
(<tt class="docutils literal"><span class="pre">sendmail</span></tt> was the &#8220;standard&#8221; UNIX tool for sending e-mail
for years). It will send messages using other transfer agents such as Exim or
Postfix despite its name, provided they have the relevant sendmail wrappers so
that they can be started with the correct command-line flags.</p>
<p>It&#8217;s a common misconception that because the Sendmail Transport returns a
result very quickly it must therefore deliver messages to recipients quickly
&#8211; this is not true. It&#8217;s not slow by any means, but it&#8217;s certainly not
faster than SMTP when it comes to getting messages to the intended recipients.
This is because sendmail itself sends the messages over SMTP once they have
been quickly spooled to disk.</p>
<p>The Sendmail Transport has the potential to be just as smart of the SMTP
Transport when it comes to notifying Swift Mailer about which recipients were
rejected, but in reality the majority of locally installed
<tt class="docutils literal"><span class="pre">sendmail</span></tt> instances are not configured well enough to
provide any useful feedback. As such Swift Mailer may report successful
deliveries where they did in fact fail before they even left your server.</p>
<p>You can run the Sendmail Transport in two different modes specified by command
line flags:</p>
<ul class="simple">
<li>&#8220;<tt class="docutils literal"><span class="pre">-bs</span></tt>&#8221; runs in SMTP mode so theoretically it will act like the SMTP
Transport</li>
<li>&#8220;<tt class="docutils literal"><span class="pre">-t</span></tt>&#8221; runs in piped mode with no feedback, but theoretically faster,
though not advised</li>
</ul>
<p>You can think of the Sendmail Transport as a sort of asynchronous SMTP
Transport &#8211; though if you have problems with delivery failures you
should try using the SMTP Transport instead. Swift Mailer isn&#8217;t doing the work
here, it&#8217;s simply passing the work to somebody else (i.e.
<tt class="docutils literal"><span class="pre">sendmail</span></tt>).</p>
<div class="section" id="using-the-sendmail-transport">
<h5>Using the Sendmail Transport<a class="headerlink" href="#using-the-sendmail-transport" title="Permalink to this headline">¶</a></h5>
<p>To use the Sendmail Transport you simply need to call
<tt class="docutils literal"><span class="pre">Swift_SendmailTransport::newInstance()</span></tt> with the command as a
parameter.</p>
<p>To use the Sendmail Transport you need to know where
<tt class="docutils literal"><span class="pre">sendmail</span></tt> or another MTA exists on the server. Swift Mailer
uses a default value of <tt class="docutils literal"><span class="pre">/usr/sbin/sendmail</span></tt>, which should
work on most systems.</p>
<p>You specify the entire command as a parameter (i.e. including the command line
flags). Swift Mailer supports operational modes of &#8220;<tt class="docutils literal"><span class="pre">-bs</span></tt>&#8221;
(default) and &#8220;<tt class="docutils literal"><span class="pre">-t</span></tt>&#8221;.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you run sendmail in &#8220;<tt class="docutils literal"><span class="pre">-t</span></tt>&#8221; mode you will get no feedback as to
whether or not sending has succeeded. Use &#8220;<tt class="docutils literal"><span class="pre">-bs</span></tt>&#8221; unless you have a
reason not to.</p>
</div>
<p>To use the Sendmail Transport:</p>
<ul class="simple">
<li>Call <tt class="docutils literal"><span class="pre">Swift_SendmailTransport::newInstance()</span></tt> with the command, including
the correct command line flags. The default is to use <tt class="docutils literal"><span class="pre">/usr/sbin/sendmail</span>
<span class="pre">-bs</span></tt> if this is not specified.</li>
<li>Use the returned object to create the Mailer.</li>
</ul>
<p>A sendmail process will be started upon the first call to <tt class="docutils literal"><span class="pre">send()</span></tt>. If the
process cannot be started successfully an Exception of type
<tt class="docutils literal"><span class="pre">Swift_Transport_TransportException</span></tt> will be thrown.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">require_once</span> <span class="s1">&#39;lib/swift_required.php&#39;</span><span class="p">;</span>

<span class="c1">//Create the Transport</span>
<span class="nv">$transport</span> <span class="o">=</span> <span class="nx">Swift_SendmailTransport</span><span class="o">::</span><span class="na">newInstance</span><span class="p">(</span><span class="s1">&#39;/usr/sbin/exim -bs&#39;</span><span class="p">);</span>

<span class="c1">//Create the Mailer using your created Transport</span>
<span class="nv">$mailer</span> <span class="o">=</span> <span class="nx">Swift_Mailer</span><span class="o">::</span><span class="na">newInstance</span><span class="p">(</span><span class="nv">$transport</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="the-mail-transport">
<h4>The Mail Transport<a class="headerlink" href="#the-mail-transport" title="Permalink to this headline">¶</a></h4>
<p>The Mail Transport sends messages by delegating to PHP&#8217;s internal
<tt class="docutils literal"><span class="pre">mail()</span></tt> function.</p>
<p>In my experience &#8211; and others&#8217; &#8211; the <tt class="docutils literal"><span class="pre">mail()</span></tt>
function is not particularly predictable, or helpful.</p>
<p>Quite notably, the <tt class="docutils literal"><span class="pre">mail()</span></tt> function behaves entirely
differently between Linux and Windows servers. On linux it uses
<tt class="docutils literal"><span class="pre">sendmail</span></tt>, but on Windows it uses SMTP.</p>
<p>In order for the <tt class="docutils literal"><span class="pre">mail()</span></tt> function to even work at all
<tt class="docutils literal"><span class="pre">php.ini</span></tt> needs to be configured correctly, specifying the
location of sendmail or of an SMTP server.</p>
<p>The problem with <tt class="docutils literal"><span class="pre">mail()</span></tt> is that it &#8220;tries&#8221; to simplify things
to the point that it actually makes things more complex due to poor interface
design. The developers of Swift Mailer have gone to a lot of effort to make
the Mail Transport work with a reasonable degree of consistency.</p>
<p>Serious drawbacks when using this Transport are:</p>
<ul class="simple">
<li>Unpredictable message headers</li>
<li>Lack of feedback regarding delivery failures</li>
<li>Lack of support for several plugins that require real-time delivery feedback</li>
</ul>
<p>It&#8217;s a last resort, and we say that with a passion!</p>
<div class="section" id="using-the-mail-transport">
<h5>Using the Mail Transport<a class="headerlink" href="#using-the-mail-transport" title="Permalink to this headline">¶</a></h5>
<p>To use the Mail Transport you simply need to call
<tt class="docutils literal"><span class="pre">Swift_MailTransport::newInstance()</span></tt>. It&#8217;s unlikely you&#8217;ll need
to configure the Transport.</p>
<p>To use the Mail Transport:</p>
<ul class="simple">
<li>Call <tt class="docutils literal"><span class="pre">Swift_MailTransport::newInstance()</span></tt>.</li>
<li>Use the returned object to create the Mailer.</li>
</ul>
<p>Messages will be sent using the <tt class="docutils literal"><span class="pre">mail()</span></tt> function.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The <tt class="docutils literal"><span class="pre">mail()</span></tt> function can take a <tt class="docutils literal"><span class="pre">$additional_parameters</span></tt> parameter.
Swift Mailer sets this to &#8220;<tt class="docutils literal"><span class="pre">-f%s</span></tt>&#8221; by default, where the &#8220;%s&#8221; is
substituted with the address of the sender (via a <tt class="docutils literal"><span class="pre">sprintf()</span></tt>) at send
time. You may override this default by passing an argument to
<tt class="docutils literal"><span class="pre">newInstance()</span></tt>.</p>
<div class="last highlight-php"><div class="highlight"><pre><span class="k">require_once</span> <span class="s1">&#39;lib/swift_required.php&#39;</span><span class="p">;</span>

<span class="c1">//Create the Transport</span>
<span class="nv">$transport</span> <span class="o">=</span> <span class="nx">Swift_MailTransport</span><span class="o">::</span><span class="na">newInstance</span><span class="p">();</span>

<span class="c1">//Create the Mailer using your created Transport</span>
<span class="nv">$mailer</span> <span class="o">=</span> <span class="nx">Swift_Mailer</span><span class="o">::</span><span class="na">newInstance</span><span class="p">(</span><span class="nv">$transport</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="available-methods-for-sending-messages">
<h3>Available Methods for Sending Messages<a class="headerlink" href="#available-methods-for-sending-messages" title="Permalink to this headline">¶</a></h3>
<p>The Mailer class offers two methods for sending Messages &#8211; <tt class="docutils literal"><span class="pre">send()</span></tt>.
Each behaves in a slightly different way.</p>
<p>When a message is sent in Swift Mailer, the Mailer class communicates with
whichever Transport class you have chosen to use.</p>
<p>Each recipient in the message should either be accepted or rejected by the
Transport. For example, if the domain name on the email address is not
reachable the SMTP Transport may reject the address because it cannot process
it. Whichever method you use &#8211; <tt class="docutils literal"><span class="pre">send()</span></tt> &#8211; Swift Mailer will return
an integer indicating the number of accepted recipients.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It&#8217;s possible to find out which recipients were rejected &#8211; we&#8217;ll
cover that later in this chapter.</p>
</div>
<div class="section" id="using-the-send-method">
<h4>Using the <tt class="docutils literal"><span class="pre">send()</span></tt> Method<a class="headerlink" href="#using-the-send-method" title="Permalink to this headline">¶</a></h4>
<p>The <tt class="docutils literal"><span class="pre">send()</span></tt> method of the <tt class="docutils literal"><span class="pre">Swift_Mailer</span></tt> class
sends a message using exactly the same logic as your Desktop mail client would
use. Just pass it a Messgae and get a result.</p>
<p>To send a Message with <tt class="docutils literal"><span class="pre">send()</span></tt>:</p>
<ul class="simple">
<li>Create a Transport from one of the provided Transports &#8211;
<tt class="docutils literal"><span class="pre">Swift_SmtpTransport</span></tt>, <tt class="docutils literal"><span class="pre">Swift_SendmailTransport</span></tt>,
<tt class="docutils literal"><span class="pre">Swift_MailTransport</span></tt> or one of the aggregate Transports.</li>
<li>Create an instance of the <tt class="docutils literal"><span class="pre">Swift_Mailer</span></tt> class, using the Transport as
it&#8217;s constructor parameter.</li>
<li>Create a Message.</li>
<li>Send the message via the <tt class="docutils literal"><span class="pre">send()</span></tt> method on the Mailer object.</li>
</ul>
<p>The message will be sent just like it would be sent if you used your mail
client. An integer is returned which includes the number of successful
recipients. If none of the recipients could be sent to then zero will be
returned, which equates to a boolean <tt class="docutils literal"><span class="pre">false</span></tt>. If you set two
<tt class="docutils literal"><span class="pre">To:</span></tt> recipients and three <tt class="docutils literal"><span class="pre">Bcc:</span></tt> recipients in
the message and all of the recipients are delivered to successfully then the
value 5 will be returned.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">require_once</span> <span class="s1">&#39;lib/swift_required.php&#39;</span><span class="p">;</span>

<span class="c1">//Create the Transport</span>
<span class="nv">$transport</span> <span class="o">=</span> <span class="nx">Swift_SmtpTransport</span><span class="o">::</span><span class="na">newInstance</span><span class="p">(</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="mi">25</span><span class="p">);</span>

<span class="c1">//Create the Mailer using your created Transport</span>
<span class="nv">$mailer</span> <span class="o">=</span> <span class="nx">Swift_Mailer</span><span class="o">::</span><span class="na">newInstance</span><span class="p">(</span><span class="nv">$transport</span><span class="p">);</span>

<span class="c1">//Create a message</span>
<span class="nv">$message</span> <span class="o">=</span> <span class="nx">Swift_Message</span><span class="o">::</span><span class="na">newInstance</span><span class="p">(</span><span class="s1">&#39;Wonderful Subject&#39;</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setFrom</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;john@doe.com&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;John Doe&#39;</span><span class="p">))</span>
  <span class="o">-&gt;</span><span class="na">setTo</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;receiver@domain.org&#39;</span><span class="p">,</span> <span class="s1">&#39;other@domain.org&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;A name&#39;</span><span class="p">))</span>
  <span class="o">-&gt;</span><span class="na">setBody</span><span class="p">(</span><span class="s1">&#39;Here is the message itself&#39;</span><span class="p">)</span>
  <span class="p">;</span>

<span class="c1">//Send the message</span>
<span class="nv">$numSent</span> <span class="o">=</span> <span class="nv">$mailer</span><span class="o">-&gt;</span><span class="na">send</span><span class="p">(</span><span class="nv">$message</span><span class="p">);</span>

<span class="nb">printf</span><span class="p">(</span><span class="s2">&quot;Sent %d messages</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nv">$numSent</span><span class="p">);</span>

<span class="cm">/* Note that often that only the boolean equivalent of the</span>
<span class="cm">   return value is of concern (zero indicates FALSE)</span>

<span class="cm">if ($mailer-&gt;send($message))</span>
<span class="cm">{</span>
<span class="cm">  echo &quot;Sent\n&quot;;</span>
<span class="cm">}</span>
<span class="cm">else</span>
<span class="cm">{</span>
<span class="cm">  echo &quot;Failed\n&quot;;</span>
<span class="cm">}</span>

<span class="cm">*/</span>
</pre></div>
</div>
</div>
<div class="section" id="sending-emails-in-batch">
<h4>Sending Emails in Batch<a class="headerlink" href="#sending-emails-in-batch" title="Permalink to this headline">¶</a></h4>
<p>If you want to send a separate message to each recipient so that only their
own address shows up in the <tt class="docutils literal"><span class="pre">To:</span></tt> field, follow the following recipe:</p>
<ul class="simple">
<li>Create a Transport from one of the provided Transports &#8211;
<tt class="docutils literal"><span class="pre">Swift_SmtpTransport</span></tt>, <tt class="docutils literal"><span class="pre">Swift_SendmailTransport</span></tt>,
<tt class="docutils literal"><span class="pre">Swift_MailTransport</span></tt> or one of the aggregate Transports.</li>
<li>Create an instance of the <tt class="docutils literal"><span class="pre">Swift_Mailer</span></tt> class, using the Transport as
it&#8217;s constructor parameter.</li>
<li>Create a Message.</li>
<li>Iterate over the recipients and send message via the <tt class="docutils literal"><span class="pre">send()</span></tt> method on
the Mailer object.</li>
</ul>
<p>Each recipient of the messages receives a different copy with only their own
email address on the <tt class="docutils literal"><span class="pre">To:</span></tt> field.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>In the following example, two emails are sent. One to each of
<tt class="docutils literal"><span class="pre">receiver&#64;domain.org</span></tt> and <tt class="docutils literal"><span class="pre">other&#64;domain.org</span></tt>. These recipients will
not be aware of each other.</p>
<div class="last highlight-php"><div class="highlight"><pre><span class="k">require_once</span> <span class="s1">&#39;lib/swift_required.php&#39;</span><span class="p">;</span>

<span class="c1">//Create the Transport</span>
<span class="nv">$transport</span> <span class="o">=</span> <span class="nx">Swift_SmtpTransport</span><span class="o">::</span><span class="na">newInstance</span><span class="p">(</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="mi">25</span><span class="p">);</span>

<span class="c1">//Create the Mailer using your created Transport</span>
<span class="nv">$mailer</span> <span class="o">=</span> <span class="nx">Swift_Mailer</span><span class="o">::</span><span class="na">newInstance</span><span class="p">(</span><span class="nv">$transport</span><span class="p">);</span>

<span class="c1">//Create a message</span>
<span class="nv">$message</span> <span class="o">=</span> <span class="nx">Swift_Message</span><span class="o">::</span><span class="na">newInstance</span><span class="p">(</span><span class="s1">&#39;Wonderful Subject&#39;</span><span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setFrom</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;john@doe.com&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;John Doe&#39;</span><span class="p">))</span>
  <span class="o">-&gt;</span><span class="na">setBody</span><span class="p">(</span><span class="s1">&#39;Here is the message itself&#39;</span><span class="p">)</span>
  <span class="p">;</span>

<span class="c1">//Send the message</span>
<span class="nv">$failedRecipients</span> <span class="o">=</span> <span class="k">array</span><span class="p">();</span>
<span class="nv">$numSent</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="nv">$to</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;receiver@domain.org&#39;</span><span class="p">,</span> <span class="s1">&#39;other@domain.org&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;A name&#39;</span><span class="p">);</span>

<span class="k">foreach</span> <span class="p">(</span><span class="nv">$to</span> <span class="k">as</span> <span class="nv">$address</span> <span class="o">=&gt;</span> <span class="nv">$name</span><span class="p">)</span>
<span class="p">{</span>
  <span class="nv">$message</span><span class="o">-&gt;</span><span class="na">setTo</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="nv">$address</span> <span class="o">=&gt;</span> <span class="nv">$name</span><span class="p">));</span>
  <span class="nv">$numSent</span> <span class="o">+=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">send</span><span class="p">(</span><span class="nv">$message</span><span class="p">,</span> <span class="nv">$failedRecipients</span><span class="p">);</span>
<span class="p">}</span>

<span class="nb">printf</span><span class="p">(</span><span class="s2">&quot;Sent %d messages</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="nv">$numSent</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="finding-out-rejected-addresses">
<h3>Finding out Rejected Addresses<a class="headerlink" href="#finding-out-rejected-addresses" title="Permalink to this headline">¶</a></h3>
<p>It&#8217;s possible to get a list of addresses that were rejected by the Transport
by using a by-reference parameter to <tt class="docutils literal"><span class="pre">send()</span></tt>.</p>
<p>As Swift Mailer attempts to send the message to each address given to it, if a
recipient is rejected it will be added to the array. You can pass an existing
array, otherwise one will be created by-reference.</p>
<p>Collecting the list of recipients that were rejected can be useful in
circumstances where you need to &#8220;prune&#8221; a mailing list for example when some
addresses cannot be delivered to.</p>
<div class="section" id="getting-failures-by-reference">
<h4>Getting Failures By-reference<a class="headerlink" href="#getting-failures-by-reference" title="Permalink to this headline">¶</a></h4>
<p>Collecting delivery failures by-reference with the <tt class="docutils literal"><span class="pre">send()</span></tt> method is as
simple as passing a variable name to the method call.</p>
<p>To get failed recipients by-reference:</p>
<ul class="simple">
<li>Pass a by-reference variable name to the <tt class="docutils literal"><span class="pre">send()</span></tt> method of the Mailer
class.</li>
</ul>
<p>If the Transport rejects any of the recipients, the culprit addresses will be
added to the array provided by-reference.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If the variable name does not yet exist, it will be initialized as an
empty array and then failures will be added to that array. If the variable
already exists it will be type-cast to an array and failures will be added
to it.</p>
<div class="last highlight-php"><div class="highlight"><pre><span class="nv">$mailer</span> <span class="o">=</span> <span class="nx">Swift_Mailer</span><span class="o">::</span><span class="na">newInstance</span><span class="p">(</span> <span class="o">...</span> <span class="p">);</span>

<span class="nv">$message</span> <span class="o">=</span> <span class="nx">Swift_Message</span><span class="o">::</span><span class="na">newInstance</span><span class="p">(</span> <span class="o">...</span> <span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setFrom</span><span class="p">(</span> <span class="o">...</span> <span class="p">)</span>
  <span class="o">-&gt;</span><span class="na">setTo</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;receiver@bad-domain.org&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Receiver Name&#39;</span><span class="p">,</span>
    <span class="s1">&#39;other@domain.org&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;A name&#39;</span><span class="p">,</span>
    <span class="s1">&#39;other-receiver@bad-domain.org&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Other Name&#39;</span>
  <span class="p">))</span>
  <span class="o">-&gt;</span><span class="na">setBody</span><span class="p">(</span> <span class="o">...</span> <span class="p">)</span>
  <span class="p">;</span>

<span class="c1">//Pass a variable name to the send() method</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$mailer</span><span class="o">-&gt;</span><span class="na">send</span><span class="p">(</span><span class="nv">$message</span><span class="p">,</span> <span class="nv">$failures</span><span class="p">))</span>
<span class="p">{</span>
  <span class="k">echo</span> <span class="s2">&quot;Failures:&quot;</span><span class="p">;</span>
  <span class="nb">print_r</span><span class="p">(</span><span class="nv">$failures</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/*</span>
<span class="cm">Failures:</span>
<span class="cm">Array (</span>
<span class="cm">  0 =&gt; receiver@bad-domain.org,</span>
<span class="cm">  1 =&gt; other-receiver@bad-domain.org</span>
<span class="cm">)</span>
<span class="cm">*/</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>


<div id="page_prev_next">
</div>

<div class="common_content_footer">
<ul>
  <li> → <a href="http://symfony.com/doc/current/osc2011-nagoya-symfony2-tutorial/Symfony/vendor/swiftmailer/doc/sending.html">公式英語ドキュメント</a></li>
  <li> → <a href="https://github.com/symfony/symfony-docs/commits/master/osc2011-nagoya-symfony2-tutorial/Symfony/vendor/swiftmailer/doc/sending.rst">原文コミット履歴</a>
  <li> → <a href="https://github.com/symfony-japan/symfony-docs-ja/commits/master/osc2011-nagoya-symfony2-tutorial/Symfony/vendor/swiftmailer/doc/sending.rst">翻訳コミット履歴</a>
</ul>
<br />
翻訳の不備などは、お気軽にコメント欄にてご指摘ください。
</div>

<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'symfony-japan'; // required: replace example with your forum shortname

    // The following are highly recommended additional parameters. Remove the slashes in front to use.
    // var disqus_identifier = 'unique_dynamic_id_1234';
    // var disqus_url = 'http://example.com/permalink-to-page.html';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

<div class="fb-like-box" data-href="http://www.facebook.com/symfonyjapan" data-width="203" data-show-faces="true" data-stream="true" data-border-color="#FFF" data-header="true"></div>

          </div>
        </div>
      </div>

      <div class="clearer"></div>
    </div>

      </div>
      <!-- end #main -->
    </div>
    <!-- end #content_wrapper -->
  </div>
  <!-- end #content -->


  <div id="footer">
    <div id="footer_wrapper">
      <div id="footer_content">
        <div style=" position: relative;">
          <div id="footer_left"></div>
          <div id="footer_right"></div>
        </div>
        <div id="f_navbar">
        <ul>
          <li><a href="../../../../../index.html">トップ（索引）</a></li>
          <li><a href="../../../../../quick_tour/index.html">クイックツアー</a></li>
          <li><a href="../../../../../book/index.html">ガイドブック</a></li>
          <li><a href="../../../../../cookbook/index.html">クックブック</a></li>
          <li><a href="../../../../../components/index.html">コンポーネント</a></li>
          <li><a href="../../../../../reference/index.html">リファレンス</a></li>
          <li><a href="../../../../../contributing/index.html">貢献</a></li>
        </ul>
      </div>
      <!-- end #navbar -->
        <div>
          <p id="copyright">
            <a href="../../../../../contributing/documentation/license.html">ドキュメントの著作権</a>は Symfony 公式に準じます(Creative Commons Attribution-Share Alike 3.0 Unported ライセンス)。<br />
            Copyright &copy; 2014 Symfony Japan. All rights reserved.<br />
            &nbsp;&nbsp;&nbsp;Bandwidth and hardware provided by <a href="http://www.asial.co.jp/">アシアル株式会社</a>
            &nbsp;&nbsp;Powered by <a href="http://sphinx.pocoo.org/">Sphinx</a>
          </p>
        </div>
      </div>
      <!-- end #footer_content -->
        </div>
        <!-- end #footer_wrapper -->
      </div>
      <!-- end #footer -->
    </div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-16659283-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
  </body>
</html>
